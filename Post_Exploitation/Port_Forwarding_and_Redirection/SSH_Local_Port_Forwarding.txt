<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>SSH Local Port Forwarding</title>
</head><body><b><u>SSH Local Port Forwarding<br/>
<br/>
</u></b><b>Info:</b>&nbsp;Tunnel a local port to a remote server using SSH. <br/>
<br/>
<b>Program: </b>SSH<br/>
<br/>
<b>Set Up:<br/>
<br/>
On Machine B run the ssh daemon on port 53:<br/>
<br/>
</b>root@kali:~# /etc/ssh/sshd_config<br/>
<br/>
# What ports, IPs and protocols we listen for<br/>
Port 53<br/>
<br/>
root@kali:~# /etc/init.d/ssh restart<br/>
<br/>
<br/>
<b>On Machine A run the ssh command:</b><br/>
<br/>
ssh &lt;gateway&gt; -L &lt;local port to listen&gt;:&lt;remote host&gt;:&lt;remote port&gt;<br/>
<br/>
ssh w.x.y.z -L 8080:a.b.c.d:80 -p 53<br/>
<br/>
<b>Note: </b><br/>
<br/>
Gateway&#09;&#09;&#09;=&#09;Machine B ip address<br/>
-L&#09;&#09;&#09;&#09;= &#09;Local Port Forwarding<br/>
local port to listen&#09;= &#09;Machine A's port that the traffic will have to be directed to<br/>
remote host&#09;&#09;= &#09;Machine C ip address&#09;<br/>
remote port &#09;&#09;= &#09;Machine C port<br/>
-p&#09;&#09;&#09;&#09;= &#09;Port of Machine B SSH server<br/>
<br/>
<br/>
<b>Run:</b>&nbsp;<br/>
<br/>
On Machine A browse to http://127.0.0.1:8080<br/>
<br/>
<br/>
<b>Usage</b><br/>
<br/>
<b>Situation:</b>&nbsp;Machine A cannot connect to the Webserver on Machine C due to its firewall only allowing outbound traffic on TCP port 53.<br/>
<br/>
Victim's machine&#09;&#09;Attacker's Machine &#09;&#09;&#09;&#09;&#09;Web server hosting files <ul><li style="list-style-type: none"></li>
</ul>
Machine A &lt;----------------&gt; Machine B &lt;---------------------------------------------&gt; Machine C<br/>
<br/>
Machine A &lt;-------------------&gt; w.y.x.z &lt;-------------------------------------------------&gt; a.b.c.d:80<br/>
<br/>
<br/>
<b>Machine B sets up SSH daemon on port 53</b><br/>
<b>Machine A SSH connects to Machine B on port 53 using the local port fowarding method, setting the gateway as Machine B, the local port as 8080, the remote host as Machine C, and the port as 80 (web server)</b><br/>
<b>Machine A browses to 127.0.0.1:8080 which sends the traffic through the SSH tunnel, to Machine B, which sends the traffic onto the web server on Machine C. </b><br/>
<br/>
<br/>
<br/>
<br/>
<br/>
</body></html>