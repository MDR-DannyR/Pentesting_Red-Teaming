<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>SSH Dynamic Port Forwarding</title>
</head><body><b><u>SSH Dynamic Port Forwarding<br/>
<br/>
</u></b><b>Info:</b>&nbsp;Set a local listening port and tunnel incoming traffic to any remote destination through a proxy. <br/>
<br/>
<b>Program: </b>SSH<br/>
<br/>
<b>Set Up:</b><br/>
<br/>
<b>On Machine A, SSH connect to Machine B (vulnerable victim running ssh on port 22). </b><br/>
<br/>
ssh -D &lt;local proxy port&gt; -p &lt;remote port&gt; &lt;target&gt;<br/>
<br/>
ssh -D 8080 -p 22 a.b.c.d<br/>
<br/>
<b>Note: </b><br/>
<br/>
-D&#09;&#09;&#09;&#09;= &#09;Dynamic Port Forwarding (This tells SSH to run a SOCKS proxy on the local proxy port)<br/>
local proxy port&#09;= &#09;Machine A's port that the SOCKS4 proxy will become active on<br/>
remote port&#09;&#09;= &#09;Machine B SSH port&#09;<br/>
target&#09; &#09;&#09;= &#09;Machine B ip address<br/>
<br/>
<br/>
<b>Run:</b>&nbsp;<br/>
<br/>
Anything sent through port 8080 on Machine A will now be routed through the SOCKS proxy, then through the SSH tunnel to Machine B and then on to Network C<br/>
<br/>
<br/>
<b>Usage</b><br/>
<br/>
<b>Situation:</b>&nbsp;Machine B is a vulnerable victim machine which has SSH running on port 22 and is exposed to the internet. It is part of corporate Network C<br/>
<br/>
Attacker's Machine&#09;&#09;Victim's Vulnerable Machine &#09;&#09;&#09;&#09;&#09;Victim's Network connected to the vulnerable machine B<ul><li style="list-style-type: none"></li>
<li style="list-style-type: none">Machine A &lt;--------------------------&gt; Machine B &lt;------------------------------------------------------------&gt; Network C</li>
</ul>
<br/>
SOCKS proxy - 127.0.0.1:8080&lt;--------&gt; a.b.c.d:22 &lt;-----------------------------------------&gt; Network (multiple machines and ports)<br/>
<br/>
<br/>
<b>Machine B is a vulnerable victim machine which has SSH listening on port 22 and is part of Network C</b><br/>
<b>Machine A SSH connects to Machine B on port 22 using the dynamic port fowarding method, setting the local proxy port as 8080 (on machine A), the remote port at 22 (Machine B's SSH listening port), and the target as Machine Bs IP address<br/>
</b><b>Machine A sends traffic to it's local port 8080 which will then send it through the proxy, onto Machine B, and then onto the Network. </b><br/>
<br/>
<br/>
<br/>
<br/>
</body></html>