# Reconnaissance - Active

| Method         | Description                                   |
| --------------- | --------------------------------------------- |
| **DNS**         | Port 53 TCP and UDP |
| host -t ns megacorpone.com          | Discover DNS Name server for a domain |
| host -t mx megacorpone.com          | Discover mail server for a domain   |
| host -l [URL] [Name server address]          | Download DNS records   |
| host ww<i>w.megacorpone.com          | Forward lookup bruteforce - Guess valid names by attempting to resolve a host   |
| for ip in $(cat list.txt);do host $ip.megacorpone.com;done          | Forward Lookup bruteforce - using list.txt   |
| for ip in $(seq 155 190);do host 50.7.67.$ip;done |grep -v "not found"          | Reverse Lookup Brute force - Guess valid name by attempting to resolve an ip address   |
| host -l domain name dns server address <br> host -l megacorpone.com ns1.megacorpone.com           | Zone Transfer - Copy zone file (containing all DNS names configured for that zone) from master DNS server to Slave   |
| dnsrecon -d megacorpone.com -t axfr          | Test and attempt Zone Transfer on all NS   |
| **SMB**          | SMB1 - Windows 2000, XP and Windows 2003 <br> SMB2 – Windows Vista SP1 and Windows 2008  <br> SMB2.1 – Windows 7 and Windows 2008 R2 <br> SMB3 – Windows 8 and Windows 2012. <br> TCP port 139 and 445 + UDP  |
| nmap -v -p 139,445 -oG smb.txt 10.11.1.1-254          | Nmap scan to identify open SMB ports   |
| nbtscan -r 10.11.1.0/24          | Tool to identify Netbios information   |
| enum4linux 10.11.1.227          | tool for enumerating information from Windows and Samba systems   |
| **SNMP**          | Simple Network Management Protocol. Used to manage a network. <br> Port TCP 161 <br> SNMP is based on UDP, a simple, stateless protocol, and is therefore susceptible to IP spoofing, and replay attacks. <br> In addition, the commonly used SNMP protocols 1, 2, and 2c offer no traffic encryption, meaning SNMP information and credentials can be easily intercepted over a local network. <br> Traditional SNMP protocols also have weak authentication schemes, and are commonly left configured with default public and private community strings. <br> The SNMP Management Information Base (MIB) is a database containing information usually related to network management. <br> The database is organized like a tree, where branches represent different organizations or network functions. <br> The leaves of the tree (final endpoints) correspond to specific variable values that can then be accessed, and probed, by an external user.  <br> <br> MIB values corresponding to specific Microsoft Windows SNMP parameters: <br> 1.3.6.1.2.1.25.1.6.0 -----System Processes <br> 1.3.6.1.2.1.25.4.2.1.2 ---Running Programs <br> 1.3.6.1.2.1.25.4.2.1.4 ---Processes Path <br> 1.3.6.1.2.1.25.2.3.1.4 ---Storage Units <br> 1.3.6.1.2.1.25.6.3.1.2 ---Software Name <br> 1.3.6.1.4.1.77.1.2.25 ----User Accounts <br> 1.3.6.1.2.1.6.13.1.3 ------TCP Local Ports |
| nmap -sU --open -p 161 10.11.1.1-254 -oG mega-snmp.txt          | Nmap scan for open SNMP ports   |
| snmpwalk -c public -v1 10.11.1.219          | Enumerating the Entire MIB Tree   |
| snmpwalk –c public –v1 10.11.1.204 1.3.6.1.4.1.77.1.2.25          | Enumerating Windows Users   |
| snmpwalk -c public -v1 10.11.1.204 1.3.6.1.2.1.25.4.2.1.2          | Enumerating Running Windows Processes   |
| snmpwalk -c public -v1 10.11.1.204 1.3.6.1.2.1.6.13.1.3          | Enumerating Open TCP Ports   |
| snmpwalk -c public -v1 10.11.1.204 1.3.6.1.2.1.25.6.3.1.2          | Enumerating Installed Software   |
| snmp-check -t 192.168.1.2 -c public          | SMNP service enumeration tool   |
| echo public > community <br> echo private >> community <br> echo manager >> community <br> for ip in $(seq 200 254);do echo 10.11.1.$ip;done > ips <br> onesixtyone -c community -i ips    | Check for given community strings against an IP list. Allows brute force of various community strings.   |
| **SMTP**          | Simple Mail Transfer Protocol. <br> Mail servers. <br> TCP port 25.    |
| SMTP VRFY <br>  root@kali:~# nc -nv 10.11.1.215 25 <br> (UNKNOWN) [10.11.1.215] 25 (smtp) open <br> 220 redhat.acme.com ESMTP Sendmail 8.12.8/8.12.8; Wed, 12 Jun 2013 07:47:14 +0300 VRFY root <br> 250 2.1.5 root <r<i>oot@r<i>edhat.ac</i>me.com> <br> VRFY idontexist <br> 550 5.1.1 idontexist... User unknown        | VRFY request asks the server to verify an email address. <br> EXPN asks the server for the membership of a mailing list.    |
| **Port Scanning**          | TCP: <br> CONNECT scan - the full 3 way handshake <br> Stealth/Syn Scan - Syn / Syn-Ack. No Final Ack <br> <br> UDP <br> Empty UDP packet is sent to the port. If port open, no reply sent from target machine. If port closed, ICMP port unreachable packet should be sent back from target machine. <br> Unreliable as firewalls and router may drop ICMP packets - Could lead to false positives.    |
| nc -nvv -w 1 -z 10.0.0.19 3388-3390   | Netcat CONNECT Port Scan - 3 way handshake   |
| nmap -sT 10.0.0.19          | A default nmap TCP scan will scan the 1000 most popular ports on a given machine.   |
| nmap -sT -p 1-65535 10.0.0.19          | Full TCP scan   |
| nmap -sn 10.11.1.1-254          | Network Sweep   |
| nmap -v -sn 10.11.1.1-254 -oG ping-sweep.txt          | Network Sweep with greppable output   |
| nmap -O 10.0.0.19          | OS fingerprinting   |
| nmap -sV -sT 10.0.0.19          | Identify Services on ports (-sV)   |
| nmap 10.0.0.19 --script smb-os-discovery.nse          | NSE - Nmap Scripting Engine - /usr/share/nmap/scripts   |
| **Other**         |   |
| [Open_Mail_Relay_Article](https://www.blackhillsinfosec.com/how-to-test-for-open-mail-relays/)         | Open Mail Relay   |
| [Maltego_Setup_Article](https://null-byte.wonderhowto.com/how-to/hack-like-pro-use-maltego-do-network-reconnaissance-0158464/) | OSINT Tool Maltego   |



